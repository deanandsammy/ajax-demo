<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #hint {
            display: none;
            margin: 0;
            padding: 0;
            width: 180px;
            height: 20px;
            line-height: 20px;
            text-align: center;
            border: 1px solid red;
            color: #555555;
            background-color: papayawhip;
        }

        .form {
            margin-top: 20px;
        }

        .container label {
            display: inline-block;
            width: 50px;
        }
    </style>
</head>
<body>
<div class="container">
    <p id="hint"></p>
    <div class="form">
        <form action="/ajax">
            <label for="username">用户名</label>
            <input type="text" name="username" id="username">
            <br>
            <label for="password">密码</label>
            <input type="password" name="password" id="password">
            <br>
            <input type="submit" value="提交">
        </form>
    </div>
</div>
<script src="common/util/validation.js"></script>
<script>
    let rules = [
        {strategy: 'isEmpty', errorMsg: '用户名不能是空'},
        {strategy: 'hasSpace', errorMsg: '用户名不能有空格'},
        {strategy: 'minLength:6', errorMsg: '最小长度为6'},
    ];
    console.log(validation);
    let username = document.getElementById('username');
    let hint = document.getElementById('hint');
    let validator = new Validation();

    validator.addByDom('username', rules);

    username.addEventListener('input', function () {
        let msg = validator.validate(username, 'username');
        let display = '';
        let innerText = '';
        if (msg) {
            innerText = msg;
            display = 'block';
        } else {
            innerText = '';
            display = 'none';
        }

        hint.innerText = innerText;
        hint.style.display = display;
    });
</script>
</body>
</html>